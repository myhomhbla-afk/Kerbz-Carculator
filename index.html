<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kerbzculator — ROI Estimator</title>
  <style>
    :root { --bg:#ffffff; --text:#111; --muted:#666; --card:#f8efe6; --border:#ddd; --accent:#ff7a00; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
    .wrap{max-width:1100px;margin:0 auto;padding:24px 20px}
    h1{font-size:28px;margin:0 0 4px;font-weight:800}
    p.muted{color:var(--muted);margin:0}
    .grid{display:grid;gap:16px}
    .g-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .g-3{grid-template-columns:repeat(3,minmax(0,1fr))}
    .g-4{grid-template-columns:repeat(4,minmax(0,1fr))}
    @media (max-width: 860px){ .g-2,.g-3,.g-4{grid-template-columns:1fr} }
    .card{background:var(--card);border-radius:16px;padding:16px}
    .tile{background:var(--card);border-radius:16px;padding:16px}
    label{display:block;font-size:13px;margin:0 0 6px;color:#333;font-weight:600}
    select,input{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:14px}
    .stat-label{font-size:15px}
    .stat-value{font-size:26px;font-weight:800;margin-top:4px}
    .row{display:flex;gap:8px;align-items:center}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:14px;background:#fff;cursor:pointer}
    .btn:hover{border-color:#bbb}
    .tiny{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Kerbzculator</h1>
    <p class="muted">Quick ROI estimate for renting your track car (offline version, no internet required).</p>

    <div class="grid g-3" style="margin-top:18px">
      <div>
        <label>Region</label>
        <select id="region"></select>
      </div>
      <div>
        <label>Car Model</label>
        <select id="model"></select>
      </div>
      <div>
        <label>Rental rate</label>
        <select id="rate"></select>
        <div class="tiny">Tip: choose "Use model default" to use the model's daily rate.</div>
      </div>
    </div>

    <div class="grid g-2" style="margin-top:16px">
      <div class="tile"><div class="stat-label">Selected model:</div><div id="modelName" class="stat-value">—</div></div>
      <div class="tile"><div class="stat-label">Annualized ROI:</div><div id="roi" class="stat-value">—</div></div>
    </div>

    <div class="grid g-4" style="margin-top:16px">
      <div class="tile"><div class="stat-label">Estimated value:</div><div id="value" class="stat-value">—</div></div>
      <div class="tile"><div class="stat-label">Daily rate used:</div><div id="daily" class="stat-value">—</div></div>
      <div class="tile"><div class="stat-label">Annual gross:</div><div id="gross" class="stat-value">—</div></div>
      <div class="tile"><div class="stat-label">Net after fees+consumables:</div><div id="net" class="stat-value">—</div></div>
    </div>

    <div class="card" style="margin-top:18px">
      <h3 style="margin:0 0 10px;font-size:18px">Adjust assumptions</h3>
      <div class="grid g-4">
        <div>
          <label>Avg. rented days / month</label>
          <input id="daysPerMonth" type="number" min="0" step="1">
        </div>
        <div>
          <label>Platform fee (e.g., 0.20 = 20%)</label>
          <input id="platformFee" type="number" min="0" step="0.01">
        </div>
        <div>
          <label>Insurance fee (e.g., 0.10 = 10%)</label>
          <input id="insuranceFee" type="number" min="0" step="0.01">
        </div>
        <div>
          <label>Annual brakes/consumables ($/yr)</label>
          <input id="consumablesAnnual" type="number" min="0" step="100">
        </div>
      </div>
      <div class="row" style="margin-top:12px">
        <button id="resetBtn" class="btn">Reset</button>
        <span class="tiny">Earnings = (daily × days/month × 12) − (platform + insurance) − consumables. Loan cost ≈ value × 6% APR.</span>
      </div>
    </div>
  </div>

  <script>
    const REGIONS = [
      { id: "US", label: "National Average", multiplier: 1.00 },
      { id: "NE", label: "Northeast",        multiplier: 1.08 },
      { id: "MW", label: "Midwest",          multiplier: 0.95 },
      { id: "SO", label: "South",            multiplier: 0.98 },
      { id: "WE", label: "West",             multiplier: 1.12 },
    ];
    const MODELS = [
      { id: "porsche_gt3_992",   name: "Porsche 911 GT3 (992)",        baseValue: 248000, baseDaily: 2499 },
      { id: "porsche_gt4_718",   name: "Porsche Cayman GT4 (718)",     baseValue: 119000, baseDaily: 1199 },
      { id: "porsche_gt3rs_992", name: "Porsche 911 GT3 RS (992)",     baseValue: 320000, baseDaily: 3199 },
      { id: "audi_r8",           name: "Audi R8 V10 Performance",      baseValue: 182000, baseDaily: 1799 },
      { id: "nissan_gtr",        name: "Nissan GT-R (R35)",            baseValue: 115000, baseDaily: 1099 },
      { id: "chevy_corvette_z06",name: "Chevrolet Corvette Z06 (C8)",  baseValue: 119995, baseDaily: 1199 },
      { id: "mercedes_gt_black", name: "Mercedes-AMG GT Black Series", baseValue: 325000, baseDaily: 3299 },
      { id: "ferrari_488_gtb",   name: "Ferrari 488 GTB",              baseValue: 280000, baseDaily: 2899 },
      { id: "lamborghini_huracan", name: "Lamborghini Huracán Evo",    baseValue: 245000, baseDaily: 2599 },
      { id: "toyota_supra_a90",  name: "Toyota GR Supra 3.0 (A90)",    baseValue: 44500,  baseDaily: 449 },
      { id: "mazda_miata_nd2",   name: "Mazda MX-5 Miata (ND2)",       baseValue: 27500,  baseDaily: 229 },
      { id: "honda_civic_fl5",   name: "Honda Civic Type R (FL5)",     baseValue: 45990,  baseDaily: 429 },
      { id: "vw_golf_r_mk8",     name: "Volkswagen Golf R (MK8)",      baseValue: 45385,  baseDaily: 389 },
      { id: "hyundai_elantra_n", name: "Hyundai Elantra N",            baseValue: 35000,  baseDaily: 329 },
      { id: "subaru_brz",        name: "Subaru BRZ (ZD8)",             baseValue: 30995,  baseDaily: 279 },
      { id: "nissan_z_rz34",     name: "Nissan Z Performance (RZ34)",  baseValue: 46990,  baseDaily: 449 },
      { id: "ford_mustang_gt",   name: "Ford Mustang GT (S650)",       baseValue: 42995,  baseDaily: 399 },
      { id: "chevy_camaro_1le",  name: "Chevrolet Camaro SS 1LE",      baseValue: 48995,  baseDaily: 449 },
      { id: "dodge_challenger",  name: "Dodge Challenger Scat Pack",   baseValue: 49995,  baseDaily: 459 },
      { id: "bmw_m3_g80",        name: "BMW M3 (G80)",                 baseValue: 71200,  baseDaily: 699 },
      { id: "bmw_m2_g87",        name: "BMW M2 (G87)",                 baseValue: 63195,  baseDaily: 579 },
      { id: "audi_rs3",          name: "Audi RS3 (8Y)",                baseValue: 61450,  baseDaily: 549 },
      { id: "mercedes_c63",      name: "Mercedes-AMG C63 (W206)",      baseValue: 89950,  baseDaily: 899 }
    ];
    const RATE_PRESETS = [
      { id: "default", label: "Use model default" },
      { id: "199", label: "$199/day", value: 199 },
      { id: "299", label: "$299/day", value: 299 },
      { id: "399", label: "$399/day", value: 399 },
      { id: "499", label: "$499/day", value: 499 },
      { id: "699", label: "$699/day", value: 699 },
      { id: "999", label: "$999/day", value: 999 },
      { id: "1499", label: "$1,499/day", value: 1499 },
      { id: "1999", label: "$1,999/day", value: 1999 },
      { id: "2499", label: "$2,499/day", value: 2499 },
      { id: "2999", label: "$2,999/day", value: 2999 }
    ];
    const DEFAULTS = { daysPerMonth: 3, monthsActive: 12, loanAPR: 0.06, platformFee: 0.20, insuranceFee: 0.10, consumablesAnnual: 2500 };

    const el = (id) => document.getElementById(id);
    const regionSel = el('region'); const modelSel = el('model'); const rateSel = el('rate');
    const daysPerMonth = el('daysPerMonth'); const platformFee = el('platformFee');
    const insuranceFee = el('insuranceFee'); const consumablesAnnual = el('consumablesAnnual');
    const modelName = el('modelName'); const roi = el('roi'); const value = el('value');
    const daily = el('daily'); const gross = el('gross'); const net = el('net'); const resetBtn = el('resetBtn');

    function money(n){ return n.toLocaleString(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0}); }
    function annualLoanCost(principal, apr){ return principal * apr; }

    const REGIONS_OPTS = REGIONS.map(r => `<option value="${r.id}">${r.label}</option>`).join('');
    const MODELS_OPTS = MODELS.map(m => `<option value="${m.id}">${m.name}</option>`).join('');
    const RATE_OPTS = RATE_PRESETS.map(r => `<option value="${r.id}">${r.label}</option>`).join('');
    regionSel.innerHTML = REGIONS_OPTS; modelSel.innerHTML = MODELS_OPTS; rateSel.innerHTML = RATE_OPTS;
    daysPerMonth.value = DEFAULTS.daysPerMonth; platformFee.value = DEFAULTS.platformFee;
    insuranceFee.value = DEFAULTS.insuranceFee; consumablesAnnual.value = DEFAULTS.consumablesAnnual;

    function calcAndRender(){
      const region = REGIONS.find(r => r.id === regionSel.value) || REGIONS[0];
      const model = MODELS.find(m => m.id === modelSel.value) || MODELS[0];
      const preset = RATE_PRESETS.find(r => r.id === rateSel.value) || RATE_PRESETS[0];
      const baseDaily = model.baseDaily * region.multiplier;
      const usedDaily = preset.value ? preset.value : baseDaily;
      const carValue = model.baseValue * region.multiplier;
      const dpm = parseFloat(daysPerMonth.value || 0);
      const pf  = parseFloat(platformFee.value || 0);
      const inf = parseFloat(insuranceFee.value || 0);
      const cons= parseFloat(consumablesAnnual.value || 0);
      const annualGross = usedDaily * dpm * DEFAULTS.monthsActive;
      const fees = annualGross * pf + annualGross * inf;
      const annualNet = Math.max(0, annualGross - fees - cons);
      const loan = annualLoanCost(carValue, DEFAULTS.loanAPR);
      const roiPct = carValue > 0 ? ((annualNet - loan) / carValue) * 100 : 0;
      modelName.textContent = model.name; roi.textContent = roiPct.toFixed(1) + '%';
      value.textContent = money(carValue); daily.textContent = money(usedDaily);
      gross.textContent = money(annualGross); net.textContent = money(annualNet);
    }

    [regionSel, modelSel, rateSel, daysPerMonth, platformFee, insuranceFee, consumablesAnnual]
      .forEach(elm => elm.addEventListener('input', calcAndRender));
    resetBtn.addEventListener('click', () => {
      daysPerMonth.value = DEFAULTS.daysPerMonth;
      platformFee.value = DEFAULTS.platformFee;
      insuranceFee.value = DEFAULTS.insuranceFee;
      consumablesAnnual.value = DEFAULTS.consumablesAnnual;
      calcAndRender();
    });
    calcAndRender();
  </script>
</body>
</html>